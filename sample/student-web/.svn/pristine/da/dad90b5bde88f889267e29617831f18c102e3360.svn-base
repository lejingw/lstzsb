package org.konghao.student.ws;
import java.util.List;

import javax.jws.WebService;

import org.konghao.student.model.RewardPunish;
import org.konghao.student.model.Student;
import org.konghao.student.service.IRewardPunishService;
import org.konghao.student.service.IStudentService;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.support.ClassPathXmlApplicationContext;


@WebService(endpointInterface="org.konghao.student.ws.IMyService")
public class MyService implements IMyService {
	private IStudentService studentService;
	private IRewardPunishService rewardPunishService;
	
	public MyService() {
		BeanFactory factory = new ClassPathXmlApplicationContext("beans.xml");
		studentService = (IStudentService)factory.getBean("studentService");
		rewardPunishService = (IRewardPunishService)factory.getBean("rewardPunishService");
	}

	public IRewardPunishService getRewardPunishService() {
		return rewardPunishService;
	}
	//依赖注入无效
	public void setRewardPunishService(IRewardPunishService rewardPunishService) {
		this.rewardPunishService = rewardPunishService;
	}
	public IStudentService getStudentService() {
		return studentService;
	}
	public void setStudentService(IStudentService studentService) {
		this.studentService = studentService;
	}

	@Override
	public Student getStudent(String xh) {
		Student stu = studentService.getStudentByXh(xh);
		System.out.println(stu.getName());
		return stu;
	}

	@Override
	public List<RewardPunish> listRpByStu(String xh) {
		return rewardPunishService.listRewardPunishByStuXh(xh);
	}

	@Override
	public List<Student> listRewardStu(int year, String semester) {
		return studentService.listRewardStu(year, semester);
	}

	@Override
	public List<Student> listPunishStu(int year, String semester) {
		return studentService.listPunishStu(year, semester);
	}

}
